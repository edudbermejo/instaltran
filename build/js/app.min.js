(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

require('../features/credentials/login');

require('../features/inside');

angular.module('entry', ['credentials.login', 'inside']);

},{"../features/credentials/login":4,"../features/inside":8}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports.default = function ($stateProvider, $urlRouterProvider) {
    'ngInject';

    $urlRouterProvider.otherwise('/login');

    $stateProvider.state('login', {
        url: '/login',
        templateUrl: 'src/features/credentials/login/template.html',
        controller: 'LoginController as lc'
    });
};

},{}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports.default = function ($usersManager, $state, $externalCalls) {
    'ngInject';

    var lc = this;

    lc.tryLogin = function () {

        if (!lc.user) {
            Materialize.toast('No se ha introducido usuario', 2000);
        } else {
            if (!lc.pass) {
                Materialize.toast('El campo contraseña es obligatorio', 2000);
            } else {

                $externalCalls.getUserByUsername(lc.user).then(logAndJump).catch(function () {
                    Materialize.toast('El usuario introducido no existe', 2000);
                });
            }
        }

        function logAndJump(user) {
            if (lc.pass === user.password) {
                $usersManager.setLoggedUser(user);
                $state.go('inside.timeline');
            } else {
                Materialize.toast('La contraseña no es correcta', 2000);
            }
        }
    };
};

},{}],4:[function(require,module,exports){
'use strict';

require('../../transversal/usersManager');

require('../../transversal/externalCalls');

var _config = require('./config');

var _config2 = _interopRequireDefault(_config);

var _controller = require('./controller');

var _controller2 = _interopRequireDefault(_controller);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

angular.module('credentials.login', ['ui.router', 'transversal.usersManager', 'transversal.externalCalls']).config(_config2.default).controller('LoginController', _controller2.default);

},{"../../transversal/externalCalls":15,"../../transversal/usersManager":17,"./config":2,"./controller":3}],5:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports.default = function () {
    return {
        bindings: {
            photo: '<'
        },
        controller: function controller() {},
        templateUrl: 'src/features/inside/components/photoInList/template.html'
    };
};

},{}],6:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports.default = function ($stateProvider) {
    'ngInject';

    $stateProvider.state('inside', {
        url: '/inside',
        abstract: true,
        templateUrl: 'src/features/inside/template.html',
        controller: 'InsideController as ic'
    });
};

},{}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports.default = function () {
    'ngInject';

    var ic = this;
};

},{}],8:[function(require,module,exports){
'use strict';

var _config = require('./config');

var _config2 = _interopRequireDefault(_config);

var _controller = require('./controller');

var _controller2 = _interopRequireDefault(_controller);

require('./timeline');

require('./share-photo');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

angular.module('inside', ['ui.router', 'inside.timeline', 'inside.sharePhoto']).config(_config2.default).controller('InsideController', _controller2.default);

},{"./config":6,"./controller":7,"./share-photo":11,"./timeline":14}],9:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports.default = function ($stateProvider) {
    'ngInject';

    $stateProvider.state('inside.sharePhoto', {
        url: '/sharephoto',
        templateUrl: '/src/features/inside/share-photo/template.html',
        controller: 'SharePhotoController as spc'
    });
};

},{}],10:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports.default = function () {};

},{}],11:[function(require,module,exports){
'use strict';

require('../../transversal/externalCalls');

var _config = require('./config');

var _config2 = _interopRequireDefault(_config);

var _controller = require('./controller');

var _controller2 = _interopRequireDefault(_controller);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

angular.module('inside.sharePhoto', ['transversal.externalCalls']).config(_config2.default).controller('SharePhotoController', _controller2.default);

},{"../../transversal/externalCalls":15,"./config":9,"./controller":10}],12:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports.default = function ($stateProvider) {
    'ngInject';

    $stateProvider.state('inside.timeline', {
        url: '/timeline',
        templateUrl: '/src/features/inside/timeline/template.html',
        controller: 'TimelineController as tc'
    });
};

},{}],13:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports.default = function ($externalCalls) {
    'ngInject';

    var tc = this;

    var _page = 1;

    /*tc.photos = [{
        user_id : 'Gastly',
        image : 'img/prueba.png',
        likes : 123,
        title : 'Buh!'
    }, {
        user_id : 'Haunter',
        image : 'img/haunter.png',
        likes : 321,
        title : 'Buh++!'
    }];*/

    tc.photos = $externalCalls.getPhotosTimeline(_page);
    console.log(tc.photos);

    tc.morePhotos = function () {
        _page++, tc.photos.push($externalCalls.getPhotos(_page));
    };
};

},{}],14:[function(require,module,exports){
'use strict';

var _config = require('./config');

var _config2 = _interopRequireDefault(_config);

var _controller = require('./controller');

var _controller2 = _interopRequireDefault(_controller);

var _photoInList = require('../components/photoInList');

var _photoInList2 = _interopRequireDefault(_photoInList);

require('../../transversal/externalCalls');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

angular.module('inside.timeline', ['ui.router', 'transversal.externalCalls']).config(_config2.default).controller('TimelineController', _controller2.default).component('instTimePhoto', (0, _photoInList2.default)());

},{"../../transversal/externalCalls":15,"../components/photoInList":5,"./config":12,"./controller":13}],15:[function(require,module,exports){
'use strict';

var _service = require('./service');

var _service2 = _interopRequireDefault(_service);

require('../usersManager');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

angular.module('transversal.externalCalls', ['transversal.usersManager']).service('$externalCalls', _service2.default);

},{"../usersManager":17,"./service":16}],16:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports.default = function ($usersManager, $http, $q) {
    'ngInject';

    var _url = 'http://localhost:2222';

    // Recupera fotos con paginacion. Se pasan los followed para hacer join.
    this.getPhotosTimeline = function (page) {
        var _qu = $q.defer();

        var _user = $usersManager.getLoggedUser();

        return $http({
            url: _url + '/photos',
            method: 'GET',
            params: { page: page,
                userid: _user._id }
        }).then(backPhotosOK).catch(backPhotosWrong);

        function backPhotosOK(response) {
            if (response.data) {
                _qu.resolve(response.data);
            } else {
                _qu.reject('Nothing found');
            }
        };

        function backPhotosWrong(error) {
            _qu.reject('Error');
        }

        return _qu.promise;
    };

    // Recupera un usuario haciendo uso de su id (en tabla de mongo)
    this.getUserById = function (id) {

        var _qu = $q.defer();

        return $http({
            url: _url + '/users/' + id,
            method: 'GET'
        }).then(backUserOK).catch(backUserWrong);

        function backUserOK(response) {
            if (response.data) {
                _qu.resolve(response.data);
            } else {
                _qu.reject('Nothing found');
            }
        };

        function backUserWrong(error) {
            _qu.reject('Error');
        }

        return _qu.promise;
    };

    // Recupera un usuario haciendo uso de su username
    this.getUserByUsername = function (username) {

        var _qu = $q.defer();

        $http({
            url: _url + '/users',
            params: {
                username: username,
                strict: "s"
            },
            method: 'GET'
        }).then(backUserOK).catch(backUserWrong);

        function backUserOK(response) {
            if (response.data) {
                _qu.resolve(response.data);
            } else {
                _qu.reject('Nothing found');
            }
        };

        function backUserWrong(error) {
            _qu.reject('Error');
        }

        return _qu.promise;
    };
};

},{}],17:[function(require,module,exports){
'use strict';

var _service = require('./service');

var _service2 = _interopRequireDefault(_service);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

angular.module('transversal.usersManager', []).service('$usersManager', _service2.default);

},{"./service":18}],18:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

exports.default = function () {
    'ngInject';

    var _logged;

    this.setLoggedUser = function (user) {
        _logged = user;
    };

    this.getLoggedUser = function () {
        return _logged;
    };

    this.loggout = function () {
        _logged = null;
    };
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvaW5kZXguanMiLCJzcmMvZmVhdHVyZXMvY3JlZGVudGlhbHMvbG9naW4vY29uZmlnLmpzIiwic3JjL2ZlYXR1cmVzL2NyZWRlbnRpYWxzL2xvZ2luL2NvbnRyb2xsZXIuanMiLCJzcmMvZmVhdHVyZXMvY3JlZGVudGlhbHMvbG9naW4vaW5kZXguanMiLCJzcmMvZmVhdHVyZXMvaW5zaWRlL2NvbXBvbmVudHMvcGhvdG9Jbkxpc3QvaW5kZXguanMiLCJzcmMvZmVhdHVyZXMvaW5zaWRlL2NvbmZpZy5qcyIsInNyYy9mZWF0dXJlcy9pbnNpZGUvY29udHJvbGxlci5qcyIsInNyYy9mZWF0dXJlcy9pbnNpZGUvaW5kZXguanMiLCJzcmMvZmVhdHVyZXMvaW5zaWRlL3NoYXJlLXBob3RvL2NvbmZpZy5qcyIsInNyYy9mZWF0dXJlcy9pbnNpZGUvc2hhcmUtcGhvdG8vY29udHJvbGxlci5qcyIsInNyYy9mZWF0dXJlcy9pbnNpZGUvc2hhcmUtcGhvdG8vaW5kZXguanMiLCJzcmMvZmVhdHVyZXMvaW5zaWRlL3RpbWVsaW5lL2NvbmZpZy5qcyIsInNyYy9mZWF0dXJlcy9pbnNpZGUvdGltZWxpbmUvY29udHJvbGxlci5qcyIsInNyYy9mZWF0dXJlcy9pbnNpZGUvdGltZWxpbmUvaW5kZXguanMiLCJzcmMvZmVhdHVyZXMvdHJhbnN2ZXJzYWwvZXh0ZXJuYWxDYWxscy9pbmRleC5qcyIsInNyYy9mZWF0dXJlcy90cmFuc3ZlcnNhbC9leHRlcm5hbENhbGxzL3NlcnZpY2UuanMiLCJzcmMvZmVhdHVyZXMvdHJhbnN2ZXJzYWwvdXNlcnNNYW5hZ2VyL2luZGV4LmpzIiwic3JjL2ZlYXR1cmVzL3RyYW5zdmVyc2FsL3VzZXJzTWFuYWdlci9zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FDR0EsUUFDSyxNQURM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c0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgJy4uL2ZlYXR1cmVzL2NyZWRlbnRpYWxzL2xvZ2luJztcbmltcG9ydCAnLi4vZmVhdHVyZXMvaW5zaWRlJ1xuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnZW50cnknLCBbXG4gICAgICAgICdjcmVkZW50aWFscy5sb2dpbicsXG4gICAgICAgICdpbnNpZGUnXG4gICAgXSk7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgICAnbmdJbmplY3QnO1xuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9sb2dpbicpO1xuXG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3NyYy9mZWF0dXJlcy9jcmVkZW50aWFscy9sb2dpbi90ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlciBhcyBsYydcbiAgICB9KVxufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgkdXNlcnNNYW5hZ2VyLCAkc3RhdGUsICRleHRlcm5hbENhbGxzKSB7XG4gICAgJ25nSW5qZWN0JztcbiAgICB2YXIgbGMgPSB0aGlzO1xuXG4gICAgbGMudHJ5TG9naW4gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaWYgKCFsYy51c2VyKSB7XG4gICAgICAgICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnTm8gc2UgaGEgaW50cm9kdWNpZG8gdXN1YXJpbycsIDIwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFsYy5wYXNzKSB7XG4gICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ0VsIGNhbXBvIGNvbnRyYXNlw7FhIGVzIG9ibGlnYXRvcmlvJywgMjAwMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgJGV4dGVybmFsQ2FsbHMuZ2V0VXNlckJ5VXNlcm5hbWUobGMudXNlcilcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4obG9nQW5kSnVtcClcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdFbCB1c3VhcmlvIGludHJvZHVjaWRvIG5vIGV4aXN0ZScsIDIwMDApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ0FuZEp1bXAodXNlcikge1xuICAgICAgICAgICAgaWYgKGxjLnBhc3MgPT09IHVzZXIucGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICAkdXNlcnNNYW5hZ2VyLnNldExvZ2dlZFVzZXIodXNlcik7XG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdpbnNpZGUudGltZWxpbmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ0xhIGNvbnRyYXNlw7FhIG5vIGVzIGNvcnJlY3RhJywgMjAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufSIsImltcG9ydCAnLi4vLi4vdHJhbnN2ZXJzYWwvdXNlcnNNYW5hZ2VyJztcbmltcG9ydCAnLi4vLi4vdHJhbnN2ZXJzYWwvZXh0ZXJuYWxDYWxscyc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcbmltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdjcmVkZW50aWFscy5sb2dpbicsIFtcbiAgICAgICAgJ3VpLnJvdXRlcicsICAgICAgICBcbiAgICAgICAgJ3RyYW5zdmVyc2FsLnVzZXJzTWFuYWdlcicsXG4gICAgICAgICd0cmFuc3ZlcnNhbC5leHRlcm5hbENhbGxzJ1xuICAgIF0pXG4gICAgLmNvbmZpZyhjb25maWcpXG4gICAgLmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIGNvbnRyb2xsZXIpOyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBiaW5kaW5nczoge1xuICAgICAgICAgICAgcGhvdG86ICc8J1xuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdzcmMvZmVhdHVyZXMvaW5zaWRlL2NvbXBvbmVudHMvcGhvdG9Jbkxpc3QvdGVtcGxhdGUuaHRtbCdcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgJ25nSW5qZWN0JztcbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnaW5zaWRlJywge1xuICAgICAgICB1cmw6ICcvaW5zaWRlJyxcbiAgICAgICAgYWJzdHJhY3QgOiB0cnVlLFxuICAgICAgICB0ZW1wbGF0ZVVybCA6ICdzcmMvZmVhdHVyZXMvaW5zaWRlL3RlbXBsYXRlLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyIDogJ0luc2lkZUNvbnRyb2xsZXIgYXMgaWMnXG4gICAgfSlcbiAgICBcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoKSB7XG4gICAgJ25nSW5qZWN0JztcbiAgICB2YXIgaWMgPSB0aGlzO1xufSIsImltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IGNvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyJztcbmltcG9ydCAnLi90aW1lbGluZSc7XG5pbXBvcnQgJy4vc2hhcmUtcGhvdG8nO1xuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnaW5zaWRlJywgW1xuICAgICAgICAndWkucm91dGVyJyxcbiAgICAgICAgJ2luc2lkZS50aW1lbGluZScsXG4gICAgICAgICdpbnNpZGUuc2hhcmVQaG90bycgICAgICAgIFxuICAgIF0pXG4gICAgLmNvbmZpZyhjb25maWcpXG4gICAgLmNvbnRyb2xsZXIoJ0luc2lkZUNvbnRyb2xsZXInLCBjb250cm9sbGVyKTsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAnbmdJbmplY3QnO1xuICAgIFxuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdpbnNpZGUuc2hhcmVQaG90bycsIHtcbiAgICAgICAgdXJsOiAnL3NoYXJlcGhvdG8nLFxuICAgICAgICB0ZW1wbGF0ZVVybCA6ICcvc3JjL2ZlYXR1cmVzL2luc2lkZS9zaGFyZS1waG90by90ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlciA6ICdTaGFyZVBob3RvQ29udHJvbGxlciBhcyBzcGMnXG4gICAgfSk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCkge1xuICAgIFxufSIsImltcG9ydCAnLi4vLi4vdHJhbnN2ZXJzYWwvZXh0ZXJuYWxDYWxscyc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcbmltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdpbnNpZGUuc2hhcmVQaG90bycsIFtcbiAgICAgICAgJ3RyYW5zdmVyc2FsLmV4dGVybmFsQ2FsbHMnXG4gICAgXSlcbiAgICAuY29uZmlnKGNvbmZpZylcbiAgICAuY29udHJvbGxlcignU2hhcmVQaG90b0NvbnRyb2xsZXInLCBjb250cm9sbGVyKTsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAnbmdJbmplY3QnO1xuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdpbnNpZGUudGltZWxpbmUnLCB7XG4gICAgICAgIHVybDogJy90aW1lbGluZScsXG4gICAgICAgIHRlbXBsYXRlVXJsIDogJy9zcmMvZmVhdHVyZXMvaW5zaWRlL3RpbWVsaW5lL3RlbXBsYXRlLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyIDogJ1RpbWVsaW5lQ29udHJvbGxlciBhcyB0YydcbiAgICB9KVxuICAgIFxufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgkZXh0ZXJuYWxDYWxscykge1xuICAgICduZ0luamVjdCc7XG4gICAgdmFyIHRjID0gdGhpcztcbiAgICBcbiAgICB2YXIgX3BhZ2UgPSAxO1xuICAgIFxuICAgIC8qdGMucGhvdG9zID0gW3tcbiAgICAgICAgdXNlcl9pZCA6ICdHYXN0bHknLFxuICAgICAgICBpbWFnZSA6ICdpbWcvcHJ1ZWJhLnBuZycsXG4gICAgICAgIGxpa2VzIDogMTIzLFxuICAgICAgICB0aXRsZSA6ICdCdWghJ1xuICAgIH0sIHtcbiAgICAgICAgdXNlcl9pZCA6ICdIYXVudGVyJyxcbiAgICAgICAgaW1hZ2UgOiAnaW1nL2hhdW50ZXIucG5nJyxcbiAgICAgICAgbGlrZXMgOiAzMjEsXG4gICAgICAgIHRpdGxlIDogJ0J1aCsrISdcbiAgICB9XTsqL1xuICAgIFxuICAgIHRjLnBob3RvcyA9ICRleHRlcm5hbENhbGxzLmdldFBob3Rvc1RpbWVsaW5lKF9wYWdlKTtcbiAgICBjb25zb2xlLmxvZyh0Yy5waG90b3MpO1xuICAgIFxuICAgIHRjLm1vcmVQaG90b3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9wYWdlKyssXG4gICAgICAgIHRjLnBob3Rvcy5wdXNoKCRleHRlcm5hbENhbGxzLmdldFBob3RvcyhfcGFnZSkpO1xuICAgIH1cbn0iLCJpbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcbmltcG9ydCBjb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG5pbXBvcnQgY29tcG9uZW50IGZyb20gJy4uL2NvbXBvbmVudHMvcGhvdG9Jbkxpc3QnO1xuaW1wb3J0ICcuLi8uLi90cmFuc3ZlcnNhbC9leHRlcm5hbENhbGxzJztcblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ2luc2lkZS50aW1lbGluZScsIFtcbiAgICAgICAgJ3VpLnJvdXRlcicsXG4gICAgICAgICd0cmFuc3ZlcnNhbC5leHRlcm5hbENhbGxzJ1xuICAgIF0pXG4gICAgLmNvbmZpZyhjb25maWcpXG4gICAgLmNvbnRyb2xsZXIoJ1RpbWVsaW5lQ29udHJvbGxlcicsIGNvbnRyb2xsZXIpXG4gICAgLmNvbXBvbmVudCgnaW5zdFRpbWVQaG90bycsIGNvbXBvbmVudCgpKTsiLCJpbXBvcnQgc2VydmljZSBmcm9tICcuL3NlcnZpY2UnO1xuaW1wb3J0ICcuLi91c2Vyc01hbmFnZXInO1xuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgndHJhbnN2ZXJzYWwuZXh0ZXJuYWxDYWxscycsIFtcbiAgICAgICAgJ3RyYW5zdmVyc2FsLnVzZXJzTWFuYWdlcidcbiAgICBdKVxuICAgIC5zZXJ2aWNlKCckZXh0ZXJuYWxDYWxscycsIHNlcnZpY2UpOyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgkdXNlcnNNYW5hZ2VyLCAkaHR0cCwgJHEpIHtcbiAgICAnbmdJbmplY3QnO1xuICAgIFxuICAgIHZhciBfdXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MjIyMic7XG4gICAgXG4gICAgLy8gUmVjdXBlcmEgZm90b3MgY29uIHBhZ2luYWNpb24uIFNlIHBhc2FuIGxvcyBmb2xsb3dlZCBwYXJhIGhhY2VyIGpvaW4uXG4gICAgdGhpcy5nZXRQaG90b3NUaW1lbGluZSA9IGZ1bmN0aW9uKHBhZ2UpIHtcbiAgICAgICAgdmFyIF9xdSA9ICRxLmRlZmVyKCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgX3VzZXIgPSAkdXNlcnNNYW5hZ2VyLmdldExvZ2dlZFVzZXIoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICB1cmwgOiBfdXJsICsgJy9waG90b3MnLFxuICAgICAgICAgICAgbWV0aG9kIDogJ0dFVCcsXG4gICAgICAgICAgICBwYXJhbXMgOiB7IHBhZ2UgOiBwYWdlLFxuICAgICAgICAgICAgICAgIHVzZXJpZCA6IF91c2VyLl9pZH1cbiAgICAgICAgfSkudGhlbihiYWNrUGhvdG9zT0spXG4gICAgICAgIC5jYXRjaChiYWNrUGhvdG9zV3JvbmcpO1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gYmFja1Bob3Rvc09LKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhKXtcbiAgICAgICAgICAgICAgICBfcXUucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3F1LnJlamVjdCgnTm90aGluZyBmb3VuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gYmFja1Bob3Rvc1dyb25nKGVycm9yKSB7XG4gICAgICAgICAgICBfcXUucmVqZWN0KCdFcnJvcicpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gX3F1LnByb21pc2U7ICAgICAgICBcbiAgICB9O1xuICAgIFxuICAgIC8vIFJlY3VwZXJhIHVuIHVzdWFyaW8gaGFjaWVuZG8gdXNvIGRlIHN1IGlkIChlbiB0YWJsYSBkZSBtb25nbylcbiAgICB0aGlzLmdldFVzZXJCeUlkID0gZnVuY3Rpb24oaWQpe1xuICAgICAgICBcbiAgICAgICAgdmFyIF9xdSA9ICRxLmRlZmVyKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgdXJsIDogX3VybCArICcvdXNlcnMvJysgaWQsXG4gICAgICAgICAgICBtZXRob2QgOiAnR0VUJ1xuICAgICAgICB9KS50aGVuKGJhY2tVc2VyT0spXG4gICAgICAgIC5jYXRjaChiYWNrVXNlcldyb25nKTtcbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGJhY2tVc2VyT0socmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEpe1xuICAgICAgICAgICAgICAgIF9xdS5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfcXUucmVqZWN0KCdOb3RoaW5nIGZvdW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBiYWNrVXNlcldyb25nKGVycm9yKSB7XG4gICAgICAgICAgICBfcXUucmVqZWN0KCdFcnJvcicpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gX3F1LnByb21pc2U7XG4gICAgfTtcbiAgICBcbiAgICAvLyBSZWN1cGVyYSB1biB1c3VhcmlvIGhhY2llbmRvIHVzbyBkZSBzdSB1c2VybmFtZSBcbiAgICB0aGlzLmdldFVzZXJCeVVzZXJuYW1lID0gZnVuY3Rpb24odXNlcm5hbWUpe1xuICAgICAgICBcbiAgICAgICAgdmFyIF9xdSA9ICRxLmRlZmVyKCk7XG4gICAgICAgIFxuICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICB1cmwgOiBfdXJsICsgJy91c2VycycsXG4gICAgICAgICAgICBwYXJhbXMgOiB7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWUgOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICBzdHJpY3QgOiBcInNcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ldGhvZCA6ICdHRVQnXG4gICAgICAgIH0pLnRoZW4oYmFja1VzZXJPSylcbiAgICAgICAgLmNhdGNoKGJhY2tVc2VyV3JvbmcpO1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gYmFja1VzZXJPSyhyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YSl7XG4gICAgICAgICAgICAgICAgX3F1LnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF9xdS5yZWplY3QoJ05vdGhpbmcgZm91bmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGJhY2tVc2VyV3JvbmcoZXJyb3IpIHtcbiAgICAgICAgICAgIF9xdS5yZWplY3QoJ0Vycm9yJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBfcXUucHJvbWlzZTtcbiAgICB9O1xuICAgIFxuICAgIFxufSIsImltcG9ydCBzZXJ2aWNlIGZyb20gJy4vc2VydmljZSc7XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCd0cmFuc3ZlcnNhbC51c2Vyc01hbmFnZXInLCBbXSlcbiAgICAuc2VydmljZSgnJHVzZXJzTWFuYWdlcicsIHNlcnZpY2UpO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCkge1xuICAgICduZ0luamVjdCc7XG4gICAgdmFyIF9sb2dnZWQ7XG5cbiAgICB0aGlzLnNldExvZ2dlZFVzZXIgPSBmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgIF9sb2dnZWQgPSB1c2VyO1xuICAgIH07XG5cbiAgICB0aGlzLmdldExvZ2dlZFVzZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9sb2dnZWQ7XG4gICAgfTtcblxuICAgIHRoaXMubG9nZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBfbG9nZ2VkID0gbnVsbDtcbiAgICB9XG59Il19
